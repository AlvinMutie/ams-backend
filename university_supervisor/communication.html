<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Communication - University Supervisor - JKUAT</title>
  <link rel="stylesheet" href="../dashboard-styles.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    .communication-container {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      height: calc(100vh - 200px);
    }
    
    .contacts-panel {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .contacts-header {
      background: #0057b8;
      color: white;
      padding: 20px;
      text-align: center;
    }
    
    .contacts-header h3 {
      margin: 0;
      font-size: 1.2rem;
    }
    
    .contact-search {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .contact-search input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 0.9rem;
    }
    
    .contact-list {
      overflow-y: auto;
      max-height: calc(100vh - 350px);
    }
    
    .contact-item {
      display: flex;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    
    .contact-item:hover {
      background: #f8f9fa;
    }
    
    .contact-item.active {
      background: #e9f0fa;
      border-left: 4px solid #0057b8;
    }
    
    .contact-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #0057b8;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 12px;
    }
    
    .contact-info {
      flex: 1;
    }
    
    .contact-name {
      font-weight: bold;
      color: #333;
      margin-bottom: 4px;
    }
    
    .contact-role {
      font-size: 0.8rem;
      color: #666;
    }
    
    .contact-status {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #28a745;
    }
    
    .chat-panel {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
    }
    
    .chat-header {
      background: #f8f9fa;
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .chat-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #0057b8;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .chat-info h4 {
      margin: 0;
      color: #333;
    }
    
    .chat-info p {
      margin: 0;
      font-size: 0.9rem;
      color: #666;
    }
    
    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #f8f9fa;
    }
    
    .message {
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .message.sent {
      flex-direction: row-reverse;
    }
    
    .message-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: #0057b8;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.8rem;
    }
    
    .message-content {
      max-width: 70%;
    }
    
    .message-bubble {
      background: white;
      padding: 12px 16px;
      border-radius: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: relative;
    }
    
    .message.sent .message-bubble {
      background: #0057b8;
      color: white;
    }
    
    .message-time {
      font-size: 0.8rem;
      color: #999;
      margin-top: 6px;
      text-align: right;
    }
    
    .message.sent .message-time {
      text-align: left;
    }
    
    .chat-input {
      padding: 20px;
      border-top: 1px solid #e0e0e0;
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .chat-input input {
      flex: 1;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 25px;
      font-size: 0.9rem;
    }
    
    .chat-input button {
      background: #0057b8;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    
    .chat-input button:hover {
      background: #004494;
    }
    
    .no-chat-selected {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #999;
      text-align: center;
    }
    
    .no-chat-selected i {
      font-size: 4rem;
      margin-bottom: 20px;
      color: #ccc;
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Toggle -->
  <button class="menu-toggle" onclick="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Top Bar -->
  <div class="top-bar">
    <div class="top-bar-left">
      <img src="https://www.jkuat.ac.ke/wp-content/uploads/2020/01/jkuat-logo.png" alt="JKUAT" height="40">
    </div>
    <div class="top-bar-center">
      Jomo Kenyatta University of Agriculture and Technology
    </div>
    <div class="top-bar-right">
      <div class="notification-bell" onclick="toggleNotifications()">
        <i class="fas fa-bell"></i>
        <span class="notification-badge">4</span>
      </div>
      <div class="user-menu">
        <span>Hi, Prof. Kamau</span>
        <i class="fas fa-chevron-down"></i>
      </div>
    </div>
  </div>

  <!-- Left Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <img src="https://www.jkuat.ac.ke/wp-content/uploads/2020/01/jkuat-logo.png" alt="JKUAT Logo">
    </div>
    
    <div class="sidebar-menu">
      <a href="dashboard.html" class="menu-item">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
      </a>
      <a href="logbook_approval.html" class="menu-item">
        <i class="fas fa-check-circle"></i>
        <span>Logbook Approval</span>
      </a>
      <a href="assessment_forms.html" class="menu-item">
        <i class="fas fa-clipboard-list"></i>
        <span>Assessment Forms</span>
      </a>
      <a href="communication.html" class="menu-item active">
        <i class="fas fa-comments"></i>
        <span>Communication</span>
      </a>
      <a href="../shared/reporting-system.html" class="menu-item">
        <i class="fas fa-chart-line"></i>
        <span>Reports</span>
      </a>
      <a href="../login.html" class="menu-item">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
    </div>
    
    <div class="sidebar-footer">
      Â©2025 - Alvin and Dominic
    </div>
  </div>

  <!-- Notification Panel -->
  <div class="notification-panel" id="notificationPanel">
    <div class="notification-header">
      <h3>Notifications</h3>
      <button class="notification-close" onclick="toggleNotifications()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="notification-list">
      <div class="notification-item unread">
        <div class="notification-title">New Assessment Submission</div>
        <div class="notification-message">Industrial supervisor Dr. Smith submitted assessment for Sarah Kimani.</div>
        <div class="notification-time">1 hour ago</div>
      </div>
      <div class="notification-item unread">
        <div class="notification-title">Logbook Review Required</div>
        <div class="notification-message">5 student logbook entries require academic review.</div>
        <div class="notification-time">3 hours ago</div>
      </div>
      <div class="notification-item unread">
        <div class="notification-title">Final Report Due</div>
        <div class="notification-message">Final reports for 3 students are due this week.</div>
        <div class="notification-time">1 day ago</div>
      </div>
      <div class="notification-item">
        <div class="notification-title">Meeting Reminder</div>
        <div class="notification-message">Department meeting scheduled for tomorrow at 10 AM.</div>
        <div class="notification-time">2 days ago</div>
      </div>
    </div>
  </div>

  <!-- Overlay for mobile -->
  <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

  <!-- Main Content -->
  <div class="main-content">
    <h1 class="page-title">Supervisor Communication</h1>
    
    <div class="communication-container">
      <!-- Contacts Panel -->
      <div class="contacts-panel">
        <div class="contacts-header">
          <h3>Contacts</h3>
        </div>
        
        <div class="contact-search">
          <input type="text" placeholder="Search contacts..." onkeyup="searchContacts(this.value)">
        </div>
        
        <div class="contact-list">
          <div class="contact-item active" onclick="selectContact('coordinator', 'Dr. Coordinator', 'Department Coordinator')">
            <div class="contact-avatar">DC</div>
            <div class="contact-info">
              <div class="contact-name">Dr. Coordinator</div>
              <div class="contact-role">Department Coordinator</div>
            </div>
            <div class="contact-status"></div>
          </div>
          
          <div class="contact-item" onclick="selectContact('dr-smith', 'Dr. Smith', 'Industrial Supervisor')">
            <div class="contact-avatar">DS</div>
            <div class="contact-info">
              <div class="contact-name">Dr. Smith</div>
              <div class="contact-role">Industrial Supervisor</div>
            </div>
            <div class="contact-status"></div>
          </div>
          
          <div class="contact-item" onclick="selectContact('eng-otieno', 'Eng. Otieno', 'Industrial Supervisor')">
            <div class="contact-avatar">EO</div>
            <div class="contact-info">
              <div class="contact-name">Eng. Otieno</div>
              <div class="contact-role">Industrial Supervisor</div>
            </div>
            <div class="contact-status"></div>
          </div>
          
          <div class="contact-item" onclick="selectContact('dr-kimani', 'Dr. Kimani', 'Industrial Supervisor')">
            <div class="contact-avatar">DK</div>
            <div class="contact-info">
              <div class="contact-name">Dr. Kimani</div>
              <div class="contact-role">Industrial Supervisor</div>
            </div>
            <div class="contact-status"></div>
          </div>
          
          <div class="contact-item" onclick="selectContact('prof-wanjiku', 'Prof. Wanjiku', 'University Supervisor')">
            <div class="contact-avatar">PW</div>
            <div class="contact-info">
              <div class="contact-name">Prof. Wanjiku</div>
              <div class="contact-role">University Supervisor</div>
            </div>
            <div class="contact-status"></div>
          </div>
        </div>
      </div>
      
      <!-- Chat Panel -->
      <div class="chat-panel" id="chatPanel">
        <div class="chat-header" id="chatHeader">
          <div class="chat-avatar">DC</div>
          <div class="chat-info">
            <h4>Dr. Coordinator</h4>
            <p>Department Coordinator</p>
          </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
          <div class="message">
            <div class="message-avatar">DC</div>
            <div class="message-content">
              <div class="message-bubble">
                Hello Prof. Kamau! I wanted to discuss the progress of the students assigned to you this semester.
              </div>
              <div class="message-time">10:30 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                Hi Dr. Coordinator! Of course, how are the students performing? Any concerns?
              </div>
              <div class="message-time">10:32 AM</div>
            </div>
          </div>
          
          <div class="message">
            <div class="message-avatar">DC</div>
            <div class="message-content">
              <div class="message-bubble">
                Most are doing well, but I have concerns about John Doe's logbook entries. They seem incomplete.
              </div>
              <div class="message-time">10:35 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                I'll look into that. Let me check with his industrial supervisor and get back to you.
              </div>
              <div class="message-time">10:37 AM</div>
            </div>
          </div>
        </div>
        
        <div class="chat-input">
          <input type="text" placeholder="Type your message..." id="messageInput" onkeypress="handleKeyPress(event)">
          <button onclick="sendMessage()">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    let currentContact = 'coordinator';
    
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      sidebar.classList.toggle('active');
      overlay.classList.toggle('active');
    }

    function closeSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
    }

    function toggleNotifications() {
      const notificationPanel = document.getElementById('notificationPanel');
      notificationPanel.classList.toggle('active');
    }
    
    function selectContact(contactId, name, role) {
      currentContact = contactId;
      
      // Update active contact
      document.querySelectorAll('.contact-item').forEach(item => {
        item.classList.remove('active');
      });
      event.currentTarget.classList.add('active');
      
      // Update chat header
      document.getElementById('chatHeader').innerHTML = `
        <div class="chat-avatar">${name.split(' ').map(n => n[0]).join('')}</div>
        <div class="chat-info">
          <h4>${name}</h4>
          <p>${role}</p>
        </div>
      `;
      
      // Load chat messages for this contact
      loadChatMessages(contactId);
    }
    
    function loadChatMessages(contactId) {
      // Here you would typically load messages from the backend
      // For now, we'll just show a placeholder
      const chatMessages = document.getElementById('chatMessages');
      
      if (contactId === 'coordinator') {
        chatMessages.innerHTML = `
          <div class="message">
            <div class="message-avatar">DC</div>
            <div class="message-content">
              <div class="message-bubble">
                Hello Prof. Kamau! I wanted to discuss the progress of the students assigned to you this semester.
              </div>
              <div class="message-time">10:30 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                Hi Dr. Coordinator! Of course, how are the students performing? Any concerns?
              </div>
              <div class="message-time">10:32 AM</div>
            </div>
          </div>
          
          <div class="message">
            <div class="message-avatar">DC</div>
            <div class="message-content">
              <div class="message-bubble">
                Most are doing well, but I have concerns about John Doe's logbook entries. They seem incomplete.
              </div>
              <div class="message-time">10:35 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                I'll look into that. Let me check with his industrial supervisor and get back to you.
              </div>
              <div class="message-time">10:37 AM</div>
            </div>
          </div>
        `;
      } else if (contactId === 'dr-smith') {
        chatMessages.innerHTML = `
          <div class="message">
            <div class="message-avatar">DS</div>
            <div class="message-content">
              <div class="message-bubble">
                Hello Prof. Kamau! I'm the industrial supervisor for Sarah Kimani. I wanted to discuss her progress.
              </div>
              <div class="message-time">9:15 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                Hi Dr. Smith! Yes, I'd like to hear about Sarah's performance. How is she doing?
              </div>
              <div class="message-time">9:20 AM</div>
            </div>
          </div>
          
          <div class="message">
            <div class="message-avatar">DS</div>
            <div class="message-content">
              <div class="message-bubble">
                Sarah is doing excellent work! She's very proactive, completes tasks on time, and shows great initiative. Her logbook entries are comprehensive and well-written.
              </div>
              <div class="message-time">9:25 AM</div>
            </div>
          </div>
        `;
      } else if (contactId === 'eng-otieno') {
        chatMessages.innerHTML = `
          <div class="message">
            <div class="message-avatar">EO</div>
            <div class="message-content">
              <div class="message-bubble">
                Hello Prof. Kamau! I'm supervising John Doe at Safaricom. I have some concerns about his logbook entries.
              </div>
              <div class="message-time">11:00 AM</div>
            </div>
          </div>
          
          <div class="message sent">
            <div class="message-avatar">PK</div>
            <div class="message-content">
              <div class="message-bubble">
                Hi Eng. Otieno! What specific concerns do you have about John's logbook?
              </div>
              <div class="message-time">11:05 AM</div>
            </div>
          </div>
        `;
      } else {
        chatMessages.innerHTML = `
          <div class="no-chat-selected">
            <i class="fas fa-comments"></i>
            <h3>Start a conversation</h3>
            <p>Select a contact to begin chatting</p>
          </div>
        `;
      }
    }
    
    function sendMessage() {
      const messageInput = document.getElementById('messageInput');
      const message = messageInput.value.trim();
      
      if (!message) return;
      
      const chatMessages = document.getElementById('chatMessages');
      const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      
      const messageElement = document.createElement('div');
      messageElement.className = 'message sent';
      messageElement.innerHTML = `
        <div class="message-avatar">PK</div>
        <div class="message-content">
          <div class="message-bubble">
            ${message}
          </div>
          <div class="message-time">${currentTime}</div>
        </div>
      `;
      
      chatMessages.appendChild(messageElement);
      messageInput.value = '';
      
      // Scroll to bottom
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Here you would typically send the message to the backend
      console.log(`Sending message to ${currentContact}: ${message}`);
    }
    
    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }
    
    function searchContacts(query) {
      const contactItems = document.querySelectorAll('.contact-item');
      
      contactItems.forEach(item => {
        const name = item.querySelector('.contact-name').textContent.toLowerCase();
        const role = item.querySelector('.contact-role').textContent.toLowerCase();
        const searchText = query.toLowerCase();
        
        if (name.includes(searchText) || role.includes(searchText)) {
          item.style.display = 'flex';
        } else {
          item.style.display = 'none';
        }
      });
    }
  </script>
</body>
</html> 